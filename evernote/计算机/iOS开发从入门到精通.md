## iOS开发从入门到精通

##### 北京希望电子出版社

  

  1.4.2 iOS SDK介绍

  

2014-06-12 08:30:06

典型的iOS程序包含一个Window（窗口）和几个UIViewController（视图控制器），每个UIViewController可以管理多个UIVie
w（在iPhone里看到的、摸到的都是UIView，可能是UITableView、UIWebView、UIImageView等）。这些UIView之间如何进
行层次迭放、显示、隐藏、旋转、移动等都由UIViewController进行管理，而UIViewController之间的切换，通常情况是通过UINavig
ationController、UITabBarController或UISplitViewController进行切换。

  

  1.7 常用的开发框架

  

2014-06-12 08:32:17

在iOS应用中有两种最常用的框架，分别是Foundation框架和Cocoa框架。

  

  1.7.2 Cocoa框架简介

  

2014-06-12 08:42:47

在Mac OS X操作系统中，术语Cocoa是指Foundation框架和Application kit框架。术语Cocoa
Touch是指Foundation框架和UIKit框架。由此可见，Cocoa是一种支持应用程序提供丰富用户体验的框架，它实际上由如下两个框架组成：  
Foundation框架  
Application Kit（或AppKit）框架  
其中后者用于提供与窗口、按钮、列表等相关的类。在编程语言中，通常使用示意图来说明框架最顶层应用程序与底层硬件之间的层次。

  

2014-06-12 08:44:45

Cocoa框架用于Mac OS X桌面与笔记本电脑的应用程序开发，而Cocoa Touch框架用于iPhone与iTouch的应用程序开发。  
Cocoa和Cocoa Touch都有Foundation框架。然而在Cocoa
Touch下，UIKit代替了AppKit框架，以便为很多相同类型的对象提供支持，例如窗口、视图、按钮、文本域等。另外，Cocoa
Touch还提供使用加速器（它与GPS和WiFi信号一样都能跟踪用户的位置）的类和触摸式界面，并且去掉了不需要的类，比如支持打印的类。

  

  2.1.4 为什么选择Objective-C？

  

2014-06-12 08:47:27

Objective-C支持开放式的动态绑定，从而有助于交互式用户接口架构的简单化。例如，在Objective-
C中发送消息既无须考虑消息接收者的类，也无须考虑方法的名字，从而可以允许用户在运行时再做出决定，也给了开发者设计的极大自由。

  

2014-06-12 08:47:51

Objective-C的动态机制成就了各种复杂的开发工具。运行环境提供了访问运行中程序数据的接口，所以使得开发工具监控Objective-C程序成为可能。

  

  2.3 Objective-C的优点及缺点

  

2014-06-12 08:48:49

Objective-C是一种非常“实际”的编程语言，它使用一个用C写成的很小的运行库，只会令应用程序的大小增加很小，这和大部分OO（面向对象）系统那样使用极
大的VM（虚拟机）执行时间来取代了整个系统的运作相反。Objective-C写成的程序通常不会比其原始码大很多。

  

  2.5.6 id类型

  

2014-06-12 08:50:48

在Objective-C程序中，id是一般对象类型，id数据类型可以存储任何类型的对象。

  

  3.1.2 为什么推出Cocoa Touch

  

2014-06-12 08:56:55

在Cocoa Touch中提供了如下几类十分常用的框架。  
（1）音频和视频  
Core Audio  
OpenAL  
Media Library  
AV Foundation  
（2）数据管理  
Core Data  
SQLite  
（3）图形和动画  
Core Animation  
OpenGL ES  
Quartz 2D

  

2014-06-12 08:57:01

（4）网络  
Bonjour  
WebKit  
BSD Sockets  
（5）用户应用  
Address Book  
Core Location  
Map Kit  
Store Kit

  

  3.2.1 Cocoa Touch层

  

2014-06-12 08:57:48

为了节省电力，大多数程序进入后台后马上就会被系统暂停。暂停的程序还在内存里，但是不执行任何代码。这样程序需要重新激活的时候可以快速恢复，但是同时不浪费任何电
力。然而，在如下原因下，程序也可以在后台下运行：  
程序可以申请有限的时间完成一些重要的任务。  
程序可以声明支持某种特定的服务，需要周期的后台运行时间。  
程序可以使用本地通知在指定的时间给用户发信息，不管程序是否在运行。  
不管程序在后台是被暂停还是继续运行，支持多任务都不需要你做什么额外的事情。系统会在切换到后台或者切换回来的时候，通知程序。在这个时刻，程序可以直接执行一些重
要的任务，例如保存用户数据等。

  

2014-06-12 09:03:10

从设计的角度看，要让iOS程序可以送推通知，需要两部分的工作。首先，程序必须请求通知的发送，且在送达的时候能够处理通知数据。然后，用户需要提供一个服务端流程
去生成这些通知。这一流程发生在用户自己的服务器上，和苹果的推送通知服务一起触发通知。

  

2014-06-12 09:04:10

本地通知的优势在于它独立于用户的程序。一旦通知被预定，系统就会来管理它的发送。在消息发送的时候，甚至不需要应用程序还在运行。

  

2014-06-12 09:06:01

UIKit包含了UIGestureRecognizer类，定义了所有手势识别器的标准行为。用户可以定义自己的定制手势识别器子类，或者是使用UIKit提供的手
势识别器子类来处理如下的标准手势：  
点击（任何次数）  
捏合缩放  
平移或者拖动  
划过（任何方向）  
旋转（手指分别向相反方向）  
长按

  

2014-06-12 09:07:02

要打开文件共享支持，需要做如下所示的工作：  
在程序的Info.ppst文件内加入键UIFileSharingEnabled，值设置为YES。  
把要共享的文件放在程序的Documents目录内。  
设备插到用户电脑时，iTunes在选定设备的程序页下面显示文件共享块。  
用户可以在桌面上增加和删除文件。  
由此可以看出，要想实现支持文件共享的程序，程序必须能够识别放到“Documents”目录中的文件，并且能够正确地处理它们。例如，程序应该用自己的界面显示新出
现的文件，而不是把这些文件列在目录里，问用户该如何处理这些文件。

  

  3.2.3 核心服务层

  

2014-06-12 09:12:54

Accounts  
鉴于其始终在线的特征，iOS设备经常用于存储众多不同服务的账户信息。Accounts框架简化了存储账户信息以及对用户进行身份验证的过程。

  

2014-06-12 09:13:48

CFNetwork  
CFNetwork让用户能够访问BSD套接字、HTTP和FTP协议请求以及Bonjour发现。

  

2014-06-12 09:13:55

Core Data  
Core Data框架可用于创建iOS应用程序的数据模型，它提供了一个基于SQLite的关系数据库模型，可用于将数据绑定到界面对象，从而避免使用代码进行复杂
的数据操纵。

  

2014-06-12 09:14:11

Core Foundation  
Core Foundation提供的大部分功能与Foundation框架相同，但它是一个过程型C语言框架，因此需要采用不同的开发方法
，这些方法的效率比Objective-C面向对象模型低。除非绝对必要，否则应避免使用Core Foundation。

  

2014-06-12 09:14:32

System Configuration  
System Configuration框架用于确定设备网络配置的当前状态：连接的是哪个网络？哪些设备可达？

  

  3.3.1 Core Animation

  

2014-06-12 09:16:13

Quartz 2D是iOS下强大的2D图形API。它提供了专业的2D图形功能，如贝赛尔曲线，变换和渐变等。使用Quartz
2D来定制接口元素可以为用户的程序带来个性化外观。由于Quartz 2D是基于可移植文档格式（PDF）的图像模型，因此显示PDF文件也是小菜一碟。

  

  3.4.2 iOS程序生命周期的原理

  

2014-06-12 09:22:55

通常来说，一个iOS应用程序拥有5种状态。  
1\. Not running  
应用还没有启动，或者应用正在运行但是途中被系统停止。  
2\. Inactive  
当前应用正在前台运行，但是并不接收事件（当前或许正在执行其他代码）。一般每当应用要从一个状态切换到另一个不同的状态时，中途过渡会短暂停留在此状态。唯一在此状
态停留时间比较长的情况是：当用户锁屏时，或者系统提示用户去响应某些（诸如电话来电、有未读短信等）事件的时候。  
3\. Active  
当前应用正在前台运行，并且接收事件。这是应用正在前台运行时所处的正常状态。

  

2014-06-12 09:23:04

4\. Background  
应用处在后台，并且还在执行代码。大多数将要进入Suspended状态的应用，会先短暂进入此状态。然而，对于请求需要额外的执行时间的应用，会在此状态保持更长一
段时间。另外，如果一个应用要求启动时直接进入后台运行，这样的应用会直接从Notrunning状态进入Background状态，中途不会经过Inactive状
态，例如没有界面的应用。此处并不特指没有界面的应用，其实也可以是有界面的应用，只是如果要直接进入background状态的话，该应用界面不会被显示。  
5\. Suspended  
应用处在后台，并且已停止执行代码。系统自动的将应用移入此状态，且在此举之前不会对应用做任何通知。当处在此状态时，应用依然驻留内存但不执行任何程序代码。当系统
发生低内存告警时，系统将会将处于Suspended状态的应用清除出内存以为正在前台运行的应用提供足够的内存。

  

  3.5.1 核心类

  

2014-06-12 09:26:13

根类是所有类的子类。面向对象编程的最大好处是当我们创建予类时，它可以继承父类的功能。NSObject是Cocoa的根类，几乎所有Objective-C类都是
从它派生而来的。这个类定义了所有类都有的方法，如alloc和init。在开发中无需手工创建NSObject实例，但是可以使用从这个类继承的方法来创建和管理对
象。

  

  3.6 Cocoa Touch的国际化

  

2014-06-12 09:29:10

在开发项目时，我们不用管显示语言的问题，在代码中任何地方要显示文字都这样调用：  
NSLocalizedString(@"AAA", @"bbb");  
这里的AAA相当于关键字，它用于以后从文件中取出相应语言对应该的文字。bbb相当于注释，翻译人员可以根据bbb的内容来翻译aaa，这里的aaa与显示的内容可
以一点关系也没有，只要程序员自己能看懂就行。比如，一个页面用于显示联系人列表，这里调用可以用如下所示的写法。  
NSLocalizedString(@"shit_or_anything_you_want", @"联系人列表标题");  
项目写好后，取出全部的文字内容送给翻译去翻译。

  

  3.7.2 快速帮助

  

2014-06-12 09:31:32

要在编码期间获取帮助，最简单、最快捷的方式之一是使用Xcode Quick
Help助手。要打开该助手，可按住Option键并双击Xcode中的符号（如类名或方法名），也可以依次选择菜单Help>Quick
Help，此时会打开一个小窗口，在里面包含了有关该符号的基本信息，还有到其他文档资源的链接。

  

  4.3.1 推出的背景

  

2014-06-12 13:00:29

随着Storyboarding的出现，使得这种方式成为历史，取而代之的是Segue [Segwei]。Segue定义了从一个ViewController到另
一个ViewController的跳转。在IB中，已熟悉如何连接元素对象和方法（Action Method）。在Stroyboard中，完全可以通过Segu
e，将ViewController连接起来，而不再需要手写代码了。如果想自定义Segue，也只需写Segue的实现，而无需编写调用的代码，Storyboar
d会自动调用。  
要想用好Storyboard机制，必须严格遵守MVC原则。View与Controller需完全解耦，并且不同的Controller之间也要充分解耦。

  

  4.3.2 故事板的文档大纲

  

2014-06-12 13:05:36

First Responder：该图标表示用户当前正在与之交互的对象。当用户使用iOS应用程序时，可能有多个对象响应用户的手势或键击。第一响应者是当前与用户
交互的对象。例如，当用户在文本框中输入时，该文本框将是第一响应者，直到用户移到其他文本框或控件。

  

2014-06-12 13:05:41

View Controller：该图标表示加载应用程序中的故事板场景并与之交互的对象。场景描述的其他所有对象几乎都是由它实例化的。第6章将更详细地介绍界面和
视图控制器之间的关系。

  

  5.1.4 使用MVC实现程序设计的结构化

  

2014-06-12 13:15:04

通过使用MVC模式，在应用程序重要组件之间定义了明确的界线。MVC定义了应用程序的如下3个部分。  
（1）模型提供底层数据和方法，它向应用程序的其他部分提供信息。模型没有定义了应用程序的外观和工作方式。  
（2）用户界面由一个或多个视图组成，而视图由不同的屏幕控件（按钮、文本框、开关等）组成，用户可与之交互。  
（3）控制器通常与视图配对，负责接受用户输入并做出相应的反应。控制器可访问视图并使用模型提供的信息更新它，还可使用用户在视图中的交互结果来更新模型。总之，它
在MVC组件之间搭建了桥梁。

  

  14.2 数据存储方式

  

2014-06-12 14:04:13

iOS应用程序存储信息的方式有很多，本章重点介绍如下3种。  
用户默认设置：针对没有应用程序存储的设置，通常不需要用户干预。  
设置束：提供了一个通过iOS应用程序Settings对应用程序进行配置的接口。  
直接访问文件系统：让用户能够读取属于当前应用程序的iOS文件系统部分的文件。

  

  17.2.2 UIAccelerometer类

  

2014-06-12 14:08:13

加速计（UIAccelerometer）是一个单例模式的类，所以需要通过方法sharedAccelerometer获取其唯一的实例。加速计需要设置如下两点：  
（1）设置其代理，用以执行获取加速计信息的方法；  
（2）设置加速计获取信息的频率。最高支持每秒100次。

* * *

多看笔记 来自多看阅读 for Kindle

duokanbookid:1bbee2f8507a4690841ef9a3558cfeaf

